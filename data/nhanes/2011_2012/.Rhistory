setwd("~/GitHub/causalnhanes/data/nhanes/2015_2016/questionaires")
#packages necessary
library(dplyr)
library(SASxport)
#reading data
RHQ = read.xport(file="RHQ_I.xpt")
demo = read.xport(file = "DEMO_I.xpt")
#filtering pregnancy data
RHQ = RHQ %>% filter(RHQ131 < 7)
RHQ = RHQ %>% filter(RHD180 < 777)
#filtering demographic data
demo = demo %>% filter(DMDEDUC2 < 7)
demo = demo %>% filter(INDFMIN2 < 77)
demo = demo %>% filter(INDFMIN2 != 13)
demo = demo %>% filter(INDFMIN2 != 12)
#merging our data
ourSet = merge(demo, RHQ, type = "inner")
#removing unused columns
set = ourSet[1]
set[2] = ourSet["RHD180"]
set[3] = ourSet["INDFMIN2"]
set[4] = ourSet["DMDEDUC2"]
age = vector(mode ="numeric", length = 15)
wealth = vector(mode = "numeric", length = 15)
for(i in 1:15) {
age[i] = colMeans(filter(set, INDFMIN2 == i))["RHD180"]
}
for(i in 1:5){
wealth[i] = 5000*i
}
for(i in 6:10){
wealth[i] = 25000 + 10000*(i -5)
}
wealth[14] = 100000
wealth[15] = 110000
plot(wealth, age, xlab = "Family wealth (USD)")
LII = set %>% filter(INDFMIN2 < 8)
HII = set %>% filter(INDFMIN2 > 7)
Ltab = count(LII, RHD180)
Htab = count(HII, RHD180)
rCount = 0;
pCount = 0;
for(i in 1:5) {
rCount = rCount + Htab[i,2]
pCount = pCount +Ltab[i,2]
}
rCount = rCount/nrow(HII)
pCount = pCount/nrow(LII)
PD = filter(LII, DMDEDUC2 < 4)
PS = filter(LII, DMDEDUC2 > 3)
RD = filter(HII, DMDEDUC2 < 4)
RS = filter(HII,DMDEDUC2 > 3)
probs = vector(mode = "numeric", length = 4)
probs[1] = nrow(filter(PD, RHD180<20))/nrow(PD)
probs[2] = nrow(filter(PS, RHD180<20))/nrow(PD)
probs[3] = nrow(filter(RD, RHD180<20))/nrow(PD)
probs[4] = nrow(filter(RS, RHD180<20))/nrow(PD)
RichCRD = probs[4]/probs[3]
poorCRD = probs[2]/probs[1]
library(SASxport)
library(dplyr)
setwd("~/GitHub/causalnhanes/data/nhanes/2011_2012")
rawBody = read.xport(BMX_G.xpt)
rawBody = read.xport(BMX_G.xpt)
rawBody = read.xport(file="BMX_G.xpt")
rawBody = rawBody %>% filter(BMXBMI < 70)
body[1] = rawBody["SEQN"]
body = rawBody["SEQN"]
body[2] = rawBody["BMXBMI"]
write.csv(file="body.csv", body)
weed = read.csv(file="seaWeed.csv")
cweed = weed["SEQN"]
cweed[2] = weed["DUQ211"]
write.csv(file="weed.csv", cweed)
library(dplyr)
library(SASxport)
setwd("~/GitHub/causalnhanes/data/nhanes/2011_2012")
weed = read.csv(file="weed.csv")
body = read.csv(file="body.csv")
data = merge(weed, body, type = "inner")
View(cweed)
View(body)
View(cweed)
body = 0
library(dplyr)
library(SASxport)
setwd("~/GitHub/causalnhanes/data/nhanes/2011_2012")
weed = read.csv(file="weed.csv")
body = read.csv(file="body.csv")
data = merge(weed, body, type = "inner")
View(body)
library(dplyr)
library(SASxport)
setwd("~/GitHub/causalnhanes/data/nhanes/2011_2012")
weed = read.csv(file="weed.csv")
body = read.csv(file="body.csv")
body[1] = body[2]
data = merge(weed, body, type = "inner")
View(body)
View(cweed)
View(data)
View(weed)
library(dplyr)
library(SASxport)
setwd("~/GitHub/causalnhanes/data/nhanes/2011_2012")
weed = read.csv(file="weed.csv")
weed[1] = weed[2]
body = read.csv(file="body.csv")
body[1] = body[2]
data = merge(weed, body, type = "inner")
View(data)
library(dplyr)
library(SASxport)
setwd("~/GitHub/causalnhanes/data/nhanes/2011_2012")
weed = read.csv(file="weed.csv")
weed[1] = weed[2]
body = read.csv(file="body.csv")
body[1] = body[2]
data = merge(weed, body, type = "inner")
date = data %>% filter(DUQ211 <5)
smokedata = filter(data, DUQ211 == 1)
soberdata = filter(data, DUQ211 == 2)
library(dplyr)
library(SASxport)
setwd("~/GitHub/causalnhanes/data/nhanes/2011_2012")
weed = read.csv(file="weed.csv")
weed[1] = weed[2]
body = read.csv(file="body.csv")
body[1] = body[2]
data = merge(weed, body, type = "inner")
data = data %>% filter(DUQ211 <5)
smokedata = filter(data, DUQ211 == 1)
soberdata = filter(data, DUQ211 == 2)
View(data)
plot(smokedate["BMXBMI"])
plot(smokedata["BMXBMI"])
plot(smokedata["BMXBMI"], 'h')
plot(smokedata["BMXBMI"], 'H')
colMeans(smokeData)
colMeans(smokedata)
colMeans(soberdata)
plot(soberdata["BMXBMI"])
summary(soberdata["BMXBMI"])
summary(smokedata["BMXBMI"])
library(dplyr)
library(SASxport)
setwd("~/GitHub/causalnhanes/data/nhanes/2011_2012")
weed = read.csv(file="weed.csv")
weed[1] = weed[2]
body = read.csv(file="body.csv")
body[1] = body[2]
data = merge(weed, body, type = "inner")
data = data %>% filter(DUQ211 <5)
smokedata = filter(data, DUQ211 == 1)
soberdata = filter(data, DUQ211 == 2)
p = vector(length = 4, mode = "numeric")
p[1] = nrow(filter(soberdata, BMXBMI < 25))/nrow(soberdata)
p[2] = nrow(filter(soberdata, BMXBMI >= 25))/nrow(soberdata)
p[3] = nrow(filter(smokedata, BMXBMI < 25))/nrow(smokedata)
p[4] = nrow(filter(smokedata, BMXBMI >= 25))/nrow(smokedata)
CRD = p[4] - p[2]
CRR = p[4]/p
library(dplyr)
library(SASxport)
setwd("~/GitHub/causalnhanes/data/nhanes/2011_2012")
weed = read.csv(file="weed.csv")
weed[1] = weed[2]
body = read.csv(file="body.csv")
body[1] = body[2]
data = merge(weed, body, type = "inner")
data = data %>% filter(DUQ211 <5)
smokedata = filter(data, DUQ211 == 1)
soberdata = filter(data, DUQ211 == 2)
p = vector(length = 4, mode = "numeric")
p[1] = nrow(filter(soberdata, BMXBMI < 25))/nrow(soberdata)
p[2] = nrow(filter(soberdata, BMXBMI >= 25))/nrow(soberdata)
p[3] = nrow(filter(smokedata, BMXBMI < 25))/nrow(smokedata)
p[4] = nrow(filter(smokedata, BMXBMI >= 25))/nrow(smokedata)
CRD = p[4] - p[2]
CRR = p[4]/p[2]
read.csv(file="seaWeed.csv")
graph = read.csv(file="seaWeed.csv")
gr = graph["SEQN"]
gr[2] = graph["DUQ217"]
merge[gr,body, type = "inner"]
View(gr)
graph = merge(gr, body, type = "inner")
fatgraph = filter(graph, BMXBMI >24)
slimgraph = filter(graph, BMXBMI <= 24)
plot(fatgraph)
View(slimgraph)
graph = graph %>% filter(DUQ217 < 7)
fatgraph = filter(graph, BMXBMI >24)
slimgraph = filter(graph, BMXBMI <= 24)
plot(slimgraph["DUQ217"], 'h')
plot(slimgraph["DUQ217"])
plot(count(slimgraph, vars = "DUQ217"))
plot(count(slimgraph, vars = DUQ217))
plot(count(fatgraph, vars = DUQ217))
plot(count(fatgraph, vars = DUQ217), 'h')
plot(count(slimgraph, vars = "DUQ217") , 'h')
plot(count(slimgraph, vars = "DUQ217") , "h")
plot(count(slimgraph, vars = "DUQ217") )
plot(count(slimgraph, vars = DUQ217), 'h' )
plot(count(slimgraph, vars = DUQ217), "h")
plot(count(slimgraph, vars = DUQ217), type = "h")
plot(count(fatgraph, vars = DUQ217), type = "h")
plot(count(slimgraph, vars = DUQ217), type = "h")
plot(count(fatgraph, vars = DUQ217), type = "h")
plot(count(slimgraph, vars = DUQ217), type = "h")
plot(count(fatgraph, vars = DUQ217), type = "h")
plot(count(slimgraph, vars = DUQ217), type = "h")
plot(count(fatgraph, vars = DUQ217), type = "h")
plot(count(slimgraph, vars = DUQ217), type = "h")
plot(count(fatgraph, vars = DUQ217), type = "h")
plot(count(slimgraph, vars = DUQ217), type = "h")
plot(count(slimgraph, vars = DUQ217), type = "h")
plot(count(slimgraph, vars = DUQ217), type = "h")
plot(count(fatgraph, vars = DUQ217), type = "h")
plot(count(slimgraph, vars = DUQ217), type = "h", xlab = "Marijuana Use Level", ylab = "frequency", main = "marijuana use in low BMI smokers")
plot(count(slimgraph, vars = DUQ217), type = "h", xlab = "Marijuana Use Level", ylab = "frequency", main = "Marijuana use in low BMI smokers")
plot(count(fatgraph, vars = DUQ217), type = "h", xlab = "Marijuana Use Level", ylab = "frequency", main = "Marijuana use in high BMI smokers")
confidence = (p[4]*p[3]/nrow(smokedata))^(1/2)
= (p[4]*p[3]/nrow(smokedata))^(1/2)
a = p[1] - p[2]
b = p[3] - p[4]
ans = a - b
