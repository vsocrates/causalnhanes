setwd("~/GitHub/causalnhanes/data/nhanes/2015_2016/questionaires")
#packages necessary
library(dplyr)
library(SASxport)
#reading data
RHQ = read.xport(file="RHQ_I.xpt")
demo = read.xport(file = "DEMO_I.xpt")
#filtering pregnancy data
RHQ = RHQ %>% filter(RHQ131 < 7)
RHQ = RHQ %>% filter(RHD180 < 777)
#filtering demographic data
demo = demo %>% filter(DMDEDUC2 < 7)
demo = demo %>% filter(INDFMIN2 < 77)
demo = demo %>% filter(INDFMIN2 != 13)
demo = demo %>% filter(INDFMIN2 != 12)
#merging our data
ourSet = merge(demo, RHQ, type = "inner")
#removing unused columns
set = ourSet[1]
set[2] = ourSet["RHD180"]
set[3] = ourSet["INDFMIN2"]
set[4] = ourSet["DMDEDUC2"]
age = vector(mode ="numeric", length = 15)
wealth = vector(mode = "numeric", length = 15)
for(i in 1:15) {
age[i] = colMeans(filter(set, INDFMIN2 == i))["RHD180"]
}
for(i in 1:5){
wealth[i] = 5000*i
}
for(i in 6:10){
wealth[i] = 25000 + 10000*(i -5)
}
wealth[14] = 100000
wealth[15] = 110000
plot(wealth, age, xlab = "Family wealth (USD)")
LII = set %>% filter(INDFMIN2 < 8)
HII = set %>% filter(INDFMIN2 > 7)
Ltab = count(LII, RHD180)
Htab = count(HII, RHD180)
rCount = 0;
pCount = 0;
for(i in 1:5) {
rCount = rCount + Htab[i,2]
pCount = pCount +Ltab[i,2]
}
rCount = rCount/nrow(HII)
pCount = pCount/nrow(LII)
PD = filter(LII, DMDEDUC2 < 4)
PS = filter(LII, DMDEDUC2 > 3)
RD = filter(HII, DMDEDUC2 < 4)
RS = filter(HII,DMDEDUC2 > 3)
probs = vector(mode = "numeric", length = 4)
probs[1] = nrow(filter(PD, RHD180<20))/nrow(PD)
probs[2] = nrow(filter(PS, RHD180<20))/nrow(PD)
probs[3] = nrow(filter(RD, RHD180<20))/nrow(PD)
probs[4] = nrow(filter(RS, RHD180<20))/nrow(PD)
RichCRD = probs[4]/probs[3]
poorCRD = probs[2]/probs[1]
setwd("~/GitHub/causalnhanes/data/nhanes/2015_2016/questionaires")
library(SASxport)
rawBMI = read.xport
rawBMI = read.xport(file="BMX_I.xpt")
View(rawBMI)
raw = rawBMI["SEQN", "BMXBMI"]
raw = rawBMI["SEQN"]
raw[2] = rawBMI["BMXBMI"]
View(raw)
test = merge(set,raw, mode="inner")
View(test)
raw = filter(raw, BMXBMI<70)
raw = filter(raw, "BMXBMI"<70)
raw = raw %>% filter("BMXBMI"<70)
library(dplyr)
raw = raw %>% filter("BMXBMI"<70)
raw = raw %>% filter(BMXBMI<70)
l= raw %>% filter(BMXBMI<70)
raw = rawBMI["SEQN"]
raw[2] = rawBMI["BMXBMI"]
raw = raw %>% filter(BMXBMI<70)
raw = raw %>% filter(BMXBMI<70)
raw[9,2]
raw[9,1]
raw[1,1]
raw[8,1]
raw[9,1]
raw[10,1]
test = merge(set,raw, mode="inner")
plot(test["BMXBMI"])
plot(count(test["BMXBMI"]))
count(test["BMXBMI"])
count(test[BMXBMI])
test[BMXBMI]
test["BMXBMI"]
count(test["BMXBMI"])
count(test, vars=BMXBMI)
plot(count(test, vars=BMXBMI))
